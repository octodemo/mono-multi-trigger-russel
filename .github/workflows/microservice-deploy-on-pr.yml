
name: Microservice Deployment Logic - On Pull Request

on:
 pull_request:

jobs:
  unit_tests:
    runs-on: ubuntu-latest
    name: Unit Tests
    steps:
      - run: echo "Unit Tests"
        shell: bash

  service_one_deployment:
    if: github.base_ref == 'dev' || github.base_ref == 'main'
    needs: unit_tests
    environment: ${{ github.base_ref == 'dev' && 'service1_dev' || github.base_ref == 'main' && 'service1_prod' || '' }}
    runs-on: ubuntu-latest
    name: Service 1 Deployment
    steps:
      - run: echo "Service 1"
        shell: bash

  service_two_deployment:
    if: github.base_ref == 'dev' || github.base_ref == 'main'
    needs: unit_tests
    environment: ${{ github.base_ref == 'dev' && 'service2_dev' || github.base_ref == 'main' && 'service2_prod' || '' }}
    runs-on: ubuntu-latest
    name: Service 2 Deployment
    steps:
      - run: echo "Service 2"
        shell: bash 
